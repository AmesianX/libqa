{{# partial "content" }}
    <!--  메뉴  -->
    <div class="container qna-top-search">
        <div class="navbar-form navbar-left" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search">
            </div>
            <a class="form-control btn btn-primary" href="/wiki/write">
                위키생성
            </a>
        </div>
        <div class="btn-group pull-right">
            <a href="#" class="btn btn-primary">총 질문(200)</a>
            <a href="#" class="btn btn-primary">총 답변(3000)</a>
            <a href="#" class="btn btn-primary">총 키워드(11200)</a>
            <a href="#" class="btn btn-primary">답변을 기다리는 Q & A(3000)</a>
        </div>
    </div>


    <div class="container contents-container top-buffer wiki-main">

        <!-- 상단 컨텐츠 -->
        <div class="col-md-12 col-lg-12">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">베스트 위키</h3>
                </div>
                <!-- BEST 위키 컨텐츠 -->
                <div class="panel-body" id="bestWikiList">
                    {{> wiki/template/_bestList}}
                </div>
                <!-- BEST 위키 컨텐츠 -->
            </div>
        </div>

        <!-- 상단 컨텐츠 -->
        <!-- 하단 컨텐츠 -->
        <div class="col-md-12 col-lg-12">
            <!-- 전체 키워드 선택 -->
            <div class="col-md-2" style="padding-left: 0px;" id="categorizeKeywordListArea">
                <div class="well">전체 키워드 선택</div>
                <ul class="nav nav-pills nav-stacked" >
                    <!--<li class="active"><a href="#">Java(120/789)</a></li>-->
                </ul>
            </div>
            <!--// 전체 키워드 선택 -->

            <div class="col-md-7">

                <!-- 전체 위키 -->
                <div id="allWikiList">
                    {{> wiki/template/_allList}}
                </div>
                <!--// 위키 -->

            </div>

            <div class="col-md-3" style="padding-right: 0px;">
                <!-- 최근 활동 -->
                <div class="nav-tabs-header">최근 활동</div>
                <div id="recentWikiList">
                    {{> wiki/template/_recentList}}
                </div>
                <!--// 최근 활동 -->
            </div>
        </div>
    </div>



{{/partial}}

{{# partial "script-page" }}
{{embedded "common/keywordList"}}
    <script>
        $(document).ready(function() {
            Wiki.renderKeywordList();
        });
        var Wiki = {
            renderKeywordList : function(keywordName){
                $.ajax({
                    url: "/common/findKeywordList",
                    type: "POST",
                    data: { keywordType : 'WIKI', keywordName : Wiki.selectedKeyword(keywordName) },
                    success : function(data){
                        if(data.resultCode == 1) {
                            var source = $('#common-keywordList-hbs').html();
                            var template = Handlebars.compile(source);

                            var html = template(data);
                            $('#categorizeKeywordListArea').html(html);
                            Wiki.bindKeywordListEvent();
                        }
                    },
                    error : function(req){
                        // Handle upload error
                        alert('req : ' + req);
                        console.log('req : ' + req.status);
                        console.log('req : ' + req.readyState);

                        alert('에러가 발생하였습니다. 에러코드 [' + req.status + ']');
                    }
                });
            },
            selectedKeyword : function(keywordName){
                if(!keywordName){
                    keywordName = '';
                }
                return keywordName;
            },
            bindKeywordListEvent : function(){
                $('#categorizeKeywordListArea').find('li').click(function(){
                    Wiki.renderKeywordList(this.getAttribute('value'));
                });
            },
        }
    </script>
{{/partial}}


{{> template/base}}