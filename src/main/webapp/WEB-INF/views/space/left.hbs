{{!--
Created by IntelliJ IDEA.
User: yion
Date: 2014. 12. 7.
Time: 16:20
To change this template use File | Settings | File Templates.
--}}

{{#partial "title"}}LibQA~{{/partial}}

{{# partial "content" }}
<!-- contents -->

<div class="container">
    <div class="col-md" >
        <div style="padding-bottom: 45px;">
            <div class="btn-group" style="float: right">
                <a class="btn btn-primary" id="cancelFavorite" style="display: none;"><i class="fa fa-heart-o"></i> 즐겨찾기 취소</a>
                <a class="btn btn-primary" id="addFavorite" style="display: none;"><i class="fa fa-heart"></i> 즐겨찾기 추가</a>
                <a class="btn btn-primary" id="createWiki"><i class="fa fa-pencil"></i> 위키 생성</a>
                <a href="#" class="btn btn-primary"><i class="fa fa-file-text"></i> 첨부파일 목록</a>
                <a href="/space/edit/{{space.spaceId}}" class="btn btn-primary"><i class="fa fa-pencil-square-o"></i>  공간 정보수정</a>
            </div>
        </div>
    </div>
</div>
<form name="space" id="space">
    <input type="hidden" name="spaceId" id="spaceId" value="{{space.spaceId}}">
</form>
<!--// contents -->
<div class="container components">
    <h1 class="page-header">{{space.title}}
        <small class="pull-right">{{space.insertDate}} {{space.insertUserNick}} 생성 </small>
    </h1>

    <div class="row" style="padding-bottom: 20px">

        <div class="col-md-4">
            <img src="{{space.titleImagePath}}/{{space.titleImage}}" width="300">
        </div>

        <div class="col-md-8">
            {{{space.description}}}
        </div>

    </div>

    <div class="row row-offcanvas row-offcanvas-right">

        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
            <div class="well sidebar-nav">
            {{#if spaceWikis}}
                {{#each spaceWikis}}
                    <a href="/wiki/{{wikiId}}">{{title}}</a><BR>
                {{/each}}
            {{^}}
                생성된 위키가 없습니다.
            {{/if}}

                <!--
                <h4>h4. Heading 4 <span class="badge">19</span></h4>
                <h5 style="margin-left:10px">- h5. Heading 5 <span class="badge">11</span></h5>
                <h5 style="margin-left:20px">- h5. Heading 5 <span class="badge">23</span></h5>
                <h5 style="margin-left:30px">- h5. Heading 5 <span class="badge">33</span></h5>

                <h4>h4. Heading 4 <span class="badge">19</span></h4>
                <h5 style="margin-left:10px">- h5. Heading 5 <span class="badge">11</span></h5>
                <h5 style="margin-left:20px">- h5. Heading 5 <span class="badge">23</span></h5>
                <h5 style="margin-left:30px">- h5. Heading 5 <span class="badge">33</span></h5>

                <h4>h4. Heading 4 <span class="badge">19</span></h4>
                <h5 style="margin-left:10px">- h5. Heading 5 <span class="badge">11</span></h5>
                <h5 style="margin-left:20px">- h5. Heading 5 <span class="badge">23</span></h5>
                <h5 style="margin-left:30px">- h5. Heading 5 <span class="badge">33</span></h5>

                <h4>h4. Heading 4 <span class="badge">19</span></h4>
                <h5 style="margin-left:10px">- h5. Heading 5 <span class="badge">11</span></h5>
                <h5 style="margin-left:20px">- h5. Heading 5 <span class="badge">23</span></h5>
                <h5 style="margin-left:30px">- h5. Heading 5 <span class="badge">33</span></h5>
                -->
            </div><!--/.well -->
        </div><!--/span-->


        <div class="col-xs-12 col-sm-9">
            <div class="row">
                <div style="padding-left:15px">
                <h3>최근 수정된 위키 목록</h3>
                <hr>
                </div>
                <blockquote class="pull-right">

                    {{#if updatedWikis}}
                        {{#each updatedWikis}}
                            <div class="media">
                                <div class="media-body">
                                    <h4 class="media-heading" id="media-heading"><a href="/wiki/{{wikiId}}">{{title}}</a><a class="anchorjs-link" href="#media-heading"><span class="anchorjs-icon"></span></a></h4>
                                    <div class="text-left"><a href="/wiki/{{wikiId}}" class="text">{{subString (htmlDelete contents) 0 250 }}</a></div>
                                </div>
                                <div class="media-right">
                                    <a href="#">
                                        <div class="user-profile">
                                            <img alt="avatar" class="profile-image" src="/resource/public/images/avatar.png" />
                                        </div>
                                    </a>
                                </div>
                            </div>
                        {{/each}}
                    {{^}}
                        생성된 위키가 없습니다.
                    {{/if}}

                    <small><cite title="Source Title" id="getMoreWiki" style="cursor:pointer">더보기</cite></small>

                </blockquote>

                <hr>
                <div style="padding-left:15px">
                <h3>최근 이 공간의 활동 내역 목록 </h3>
                <hr>
                </div>

                <blockquote class="pull-right">
                    <div class="media" style="padding-left:15px">
                        <a href="#" class="pull-left">
                            <div class="user-profile-sm">
                                <img alt="avatar" class="profile-image" src="/resource/public/images/avatar.png">
                            </div>
                        </a>

                        <div class="media-body" style="font-size:13px">
                        <span class="pull-left">
                        <u><i>01. Spring Boot 스터디 해보기 위키에 Yion 님이 댓글을 등록했습니다.</i></u>
                        </span>
                        <br>
                        : 내용은 뭐냐하면 UI 구성하기가 너무 어려우니까 생각보다 깊게 고민해봐야 할거 같고 이것저것 할게 너무 많아~~~~ 어쩌지~~ 우리...
                        <br><span clas="pull-right">2015.02.13 14:22:39</span>
                        </div>
                    </div>
                    <div class="media" style="padding-left:15px">
                        <a href="#" class="pull-left">
                            <div class="user-profile-sm">
                                <img alt="avatar" class="profile-image" src="/resource/public/images/avatar.png">
                            </div>
                        </a>

                        <div class="media-body" style="font-size:13px">
                        <span class="pull-left">
                        <u><i>01. Spring Boot 스터디 해보기 위키에 Yion 님이 댓글을 등록했습니다.</i></u>
                        </span>
                            <br>
                            : 내용은 뭐냐하면 UI 구성하기가 너무 어려우니까 생각보다 깊게 고민해봐야 할거 같고 이것저것 할게 너무 많아~~~~ 어쩌지~~ 우리...
                            <br><span clas="pull-right">2015.02.13 14:22:39</span>
                        </div>
                    </div>
                    <div class="media" style="padding-left:15px">
                        <a href="#" class="pull-left">
                            <div class="user-profile-sm">
                                <img alt="avatar" class="profile-image" src="/resource/public/images/avatar.png">
                            </div>
                        </a>

                        <div class="media-body" style="font-size:13px">
                        <span class="pull-left">
                        <u><i>01. Spring Boot 스터디 해보기 위키에 Yion 님이 댓글을 등록했습니다.</i></u>
                        </span>
                            <br>
                            : 내용은 뭐냐하면 UI 구성하기가 너무 어려우니까 생각보다 깊게 고민해봐야 할거 같고 이것저것 할게 너무 많아~~~~ 어쩌지~~ 우리...
                            <br><span clas="pull-right">2015.02.13 14:22:39</span>
                        </div>
                    </div>
                    <small><cite title="Source Title">더보기</cite></small>
                </blockquote>

            </div><!--/row-->
        </div><!--/span-->
    </div>
</div>
{{/partial}}


{{# partial "script-page" }}
    <script type="text/javascript">
        // bind the on-change event
        $(document).ready(function() {

            var userFavorite = "{{userFavorite}}";

            console.log("## userFavorite = " + userFavorite);

            if (userFavorite == '') {
                $("#addFavorite").css("display","block");
            } else {
                $("#cancelFavorite").css("display","block");
            }

            $('#createWiki').on('click', function () {
                $('#space').attr({action:'/wiki/write', method:'post'}).submit();
            });

            $('#getMoreWiki').on('click', function () {
                alert('더 가져오기');
            });

            $('#addFavorite').on('click', function () {
                var spaceId = {{space.spaceId}};
                $.ajax({
                    url: "/space/addFavorite",
                    data: { spaceId : spaceId },
                    type: "GET",
                    success : function(data){
                        console.log("data = " + data);

                        if (data == 1) {
                            $.alert({
                                title: '확인',
                                content: '즐겨찾기 추가 완료',
                                confirmButton: 'OK',
                                confirmButtonClass: 'btn-primary',
                                icon: 'fa fa-info',
                                animation: 'zoom',
                                confirm: function () {
                                }
                            });

                            $("#addFavorite").css("display","none");
                            $("#cancelFavorite").css("display","block");
                        } else if (data == 0) {
                            $.alert({
                                title: '확인',
                                content: '사용자 정보가 존재하지 않습니다. 로그인 후 다시 시도하세요.',
                                confirmButton: 'OK',
                                confirmButtonClass: 'btn-primary',
                                icon: 'fa fa-info',
                                animation: 'zoom',
                                confirm: function () {
                                }
                            });
                        }
                    },
                    error : function(req){
                        $.alert({
                            title: '확인',
                            content: '즐겨찾기 추가가 되지 않았습니다. 다시 시도하세요.',
                            confirmButton: 'OK',
                            confirmButtonClass: 'btn-primary',
                            icon: 'fa fa-info',
                            animation: 'zoom',
                            confirm: function () {
                            }
                        });
                    }
                })
            });

            $('#cancelFavorite').on('click', function () {
                var spaceId = {{space.spaceId}};
                $.ajax({
                    url: "/space/cancelFavorite",
                    data: { spaceId : spaceId },
                    type: "GET",
                    success : function(data){
                        console.log("data = " + data);

                        if (data == 1) {
                            $.alert({
                                title: '확인',
                                content: '즐겨찾기 취소 완료',
                                confirmButton: 'OK',
                                confirmButtonClass: 'btn-primary',
                                icon: 'fa fa-info',
                                animation: 'zoom',
                                confirm: function () {
                                }
                            });

                            $("#addFavorite").css("display","block");
                            $("#cancelFavorite").css("display","none");
                        } else if (data == 0) {
                            $.alert({
                                title: '확인',
                                content: '사용자 정보가 존재하지 않거나 만료 되었습니다. 다시 로그인 하세요.',
                                confirmButton: 'OK',
                                confirmButtonClass: 'btn-primary',
                                icon: 'fa fa-info',
                                animation: 'zoom',
                                confirm: function () {
                                }
                            });
                        }
                    },
                    error : function(req){
                        $.alert({
                            title: '확인',
                            content: '즐겨찾기 취소가 되지 않았습니다. 다시 시도하세요.',
                            confirmButton: 'OK',
                            confirmButtonClass: 'btn-primary',
                            icon: 'fa fa-info',
                            animation: 'zoom',
                            confirm: function () {
                            }
                        });
                    }
                })
            });

        });
    </script>
{{/partial}}

{{> template/base}}
